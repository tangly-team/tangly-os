---
title: "Logging"
linkTitle: "Logging"
date: 2025-04-01
tags: ["java", "architecture"]
---

== Logging Concepts
:author: Marcel Baumann
:email: <marcel.baumann@tangly.net>
:homepage: https://www.tangly.net/
:company: https://www.tangly.net/[tangly llc]

image::2025-04-01-head.png[width=420,height=360,role=left]

Embedded systems are hard to debug.
You do not have the luxury of connecting up most of the time a monitor and keyboard, and stepping through code is not much use when the application needs to continually respond to real-world events for the bug to appear in the first place.

And after a while, toggling your single GPIO LED just does not cut it, and you decide you need to be able to log messages and print values.
This is typically where printf() and a trusty UART is employed, spitting messages out to a computer (via an FTDI cable, virtual COM port over USB, or similar).

[quote,Brian W. Kernighan and Rob Pike,The Practice of Programming]
____
As a personal choice, we tend not to use debuggers beyond getting a stack trace or the value of a variable or two.
One reason is that it is easy to get lost in details of complicated data structures and control flow.
We find stepping through a program less productive than thinking harder and adding output statements and self-checking code at critical places.
Clicking over statements takes longer than scanning the output of judiciously-placed displays.
It takes less time to decide where to put print statements than to single-step to the critical section of code, even assuming we know where that is.
More important, debugging statements stay with the program; debugging sessions are transient.
____

This page aims to discuss the finer details about logging on embedded systems, and cover some interesting topics such as deferred logging.

=== Logging in Distributed Systems

Severity Levels::
Setting Flags::
Conditional Flags::
Debug Mode Support::
CHECK Macros::
Verbose Logging::
Performance of Messages::
Logs Management::


==== Java log4j2 Library

Apache Foundation log4j2 <<log4j2-logging>> defines a modern logging library based on the learnings of https://logging.apache.org/[log4j1.x] and https://www.slf4j.org/[slf4j].

==== C++ Library gogl

Google Log _glog_ <<google-logging>> defines a series of macros that simplify many common logging tasks.

- log messages by severity level
- control logging behavior from the command line.
- log based on conditionals.
- abort the program when expected conditions are not met.
- introduce your own verbose logging levels
- customize the prefix attached to log messages, and more.

[TIP]
====
As a C++ developer, you should consider the logging framework of the https://www.boost.org/[Boost] library.

The boost library is the tremendeous advantage to have an active community and a huge user community.
The Boost organization and wider Boost community supports research and education into the best possible uses of C++ and libraries developed for it, particularly, but not exclusively those contained in the Boost Library.
====

==== ROS-2 Logging

The logging subsystem in ROS 2 aims to deliver logging messages to a variety of targets, including:

- To the console (if one is attached)
- To log files on disk (if local storage is available) -To the /rosout topic on the ROS 2 network

By default, log messages in ROS 2 nodes will go out to the console on stderr, to log files on disk, and to the /rosout topic on the ROS 2 network.
All targets can be individually enabled or disabled on a per-node basis.

=== Lessons Learnt

You shall define a logging concept for your product.
Enforce the log record format in all packages.
The language shall be English International.

[bibliography]
=== Links

- [[[log4j2-logging, 1]]] https://logging.apache.org/log4j/2.x/index.html[log4j2 Java Logging]
- [[[google-logging, 2]]] https://github.com/google/glog[Google Log]
- [[[ros2-logging, 3]]] https://docs.ros.org/en/galactic/Concepts/About-Logging.html[About ROS-2 Logging]

=== References

bibliography::[]
