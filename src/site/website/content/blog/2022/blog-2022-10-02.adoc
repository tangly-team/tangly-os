---
title: "Modern Java Constructs"
linkTitle: "Modern Java"
date: 2022-10-15
tags: ["java", "architecture"]
---

== Modern Java Constructs
:author: Marcel Baumann
:email: <marcel.baumann@tangly.net>
:homepage: https://www.tangly.net/
:company: https://www.tangly.net/[tangly llc]

image::2022-10-02-head.jpg[width=420,height=360,role=left]

=== Try with Closeable Resources

Automatic resource management was introduced in Java 7 in 2011.
Better handling of final variables was added in Java 9 in 2017.

The _AutoCloseable_ interface is the API extension you should use to declare any resource type in your solution.

A nice feature of the solution is the support of suppressed exception hierarchy to access all exceptions potentially thrown during the closing operations.

=== Streams

Use streams to manipulate data collections.
Stream operators support similar functionality as SQL dialects.

Sequences of values are also streams. Therefore, a for loop is easily transformed in a stream of operations.

[IMPORTANT]
====

Most of imperative operations such as conditional and loop statements can be rewritten as streams.

Streams are often more legible and compact.
The approach moves the developers from imperative programming to a more functional programming style.

Modern Java code has seldom loops and conditional statements.
====

=== Functional Programming

Null values are acknowledged as a language design fault in modern software engineering.

You should never return a null value from any method.
Either you give back an empty collection or an optional object for single values.

Streams provide the _flatmaap_ operator to elegantly handle optional values in collection processing.

Remember that _Optional<T>_ is almost an implementation of a monad.
Time to study the concepts of functional programming and lambda calculus.

=== Pattern Matching

Pattern matching is another approach for functional programming.
New versions of Java support more related constructs.

The extension of the _switch_ statement into a powerful _switch_ *expression* was a game changer.

Pattern matching supports:

* Select an transformation based on the type of the variable using the _instanceof_ operator.
The simplified and type aware variable declaration is provided.
* Refine the selection though _when_ clause to differenciate the transformation.
* Record deconstruction gives access to field variables without having to call accessor methods.

[source, java]
----

----

=== Records and Sealed Types

Sealed types perfectly model a closed inherintance hierarchy.
You can control your bounded domain and inhibit any client to change it.

Records are immutable objects.
Records are the perfect construct to implement value objects as described in domain-driven design.

Business logic is implemented as additional methods.
The fact that the value objects are also immutable makes the business operations both thread-safe and side-effect free.

Factory methods can automatically be created using https://projectlombok.org/[Lombok] annotations.

=== Modules

=== Goodies

Loom Threads:: to be written
JavaDoc snippets:: to be written
JShell:: to be written
Vector Optimizations:: to be written

=== References

bibliography::[]
